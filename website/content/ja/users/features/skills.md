# エージェントスキル（実験的機能）

> Qwen Code の機能を拡張するためのスキルを作成、管理、および共有します。

このガイドでは、**Qwen Code** でエージェントスキルを作成、使用、および管理する方法を説明します。スキルとは、指示（およびオプションでスクリプトやリソース）を含む整理されたフォルダを通じてモデルの効果を拡張するモジュール式の機能です。

> [!note]
>
> スキルは現在**実験的**な機能であり、`--experimental-skills` を使用して有効にする必要があります。

## 前提条件

- Qwen Code（最新バージョン）

## 有効化方法

### CLIフラグ経由

```bash
qwen --experimental-skills
```

### settings.json経由

`~/.qwen/settings.json` またはプロジェクトの `.qwen/settings.json` に以下を追加：

```json
{
  "tools": {
    "experimental": {
      "skills": true
    }
  }
}
```

- Qwen Code の基本的な知識（[クイックスタート](../quickstart.md)）

## エージェントスキルとは？

エージェントスキルは、専門知識をパッケージ化し、検出可能な機能として提供します。各スキルは `SKILL.md` ファイルで構成され、モデルが関連性があると判断した際に読み込める指示が含まれており、スクリプトやテンプレートなどのオプションのサポートファイルも含めることができます。

### スキルの呼び出し方法

スキルは**モデルによって呼び出される**ものです。モデルは、あなたのリクエストとスキルの説明に基づいて、それらを使用するかどうかを自律的に決定します。これは、**ユーザーが呼び出す**スラッシュコマンド（明示的に `/command` と入力する）とは異なります。

特定のスキルを明示的に呼び出したい場合は、`/skills` スラッシュコマンドを使用してください：

```bash
/skills <skill-name>
```

`/skills` コマンドは、`--experimental-skills` を付けて実行している場合にのみ利用可能です。オートコンプリートを使用して、利用可能なスキルとその説明を参照できます。

### 利点

- ワークフロー用に Qwen Code を拡張可能
- Git 経由でチーム全体で専門知識を共有可能
- 繰り返しのプロンプト作成を削減可能
- 複数のスキルを組み合わせて複雑なタスクに対応可能

## スキルの作成

スキルは `SKILL.md` ファイルを含むディレクトリとして保存されます。

### 個人用スキル

個人用スキルは、すべてのプロジェクトで利用できます。`~/.qwen/skills/` に保存してください：

```bash
mkdir -p ~/.qwen/skills/my-skill-name
```

個人用スキルの用途：

- 自分のワークフローや設定
- 開発中の実験的なスキル
- 個人の生産性を高めるヘルパー

### プロジェクトスキル

プロジェクトスキルはチームと共有されます。プロジェクト内の `.qwen/skills/` に保存してください：

```bash
mkdir -p .qwen/skills/my-skill-name
```

プロジェクトスキルの用途：

- チームのワークフローと規約
- プロジェクト固有の専門知識
- 共有されるユーティリティやスクリプト

プロジェクトスキルは Git にチェックインされ、自動的にチームメンバーで利用可能になります。

## `SKILL.md` の作成

YAML フロントマターと Markdown コンテンツを持つ `SKILL.md` ファイルを作成します：

```yaml
---
name: your-skill-name
description: このスキルが何をするのか、および使用するタイミングについての簡単な説明
---

# Your Skill Name
```

## 指示
Qwen Code に対する明確なステップバイステップのガイダンスを提供してください。

## 例
このスキルの具体的な使用例を示します。
```

### フィールド要件

Qwen Code は現在、以下を検証しています：

- `name` は空でない文字列であること
- `description` は空でない文字列であること

推奨される規則（まだ厳密には強制されていません）：

- `name` では小文字、数字、ハイフンを使用する
- `description` は具体的にする：**何をするか**と**いつ使用するか**（ユーザーが自然に言及するキーワード）の両方を含める

## サポートファイルを追加

`SKILL.md` と同じディレクトリに追加ファイルを作成します：

```text
my-skill/
├── SKILL.md （必須）
├── reference.md （オプションのドキュメント）
├── examples.md （オプションの例）
├── scripts/
│   └── helper.py （オプションのユーティリティ）
└── templates/
    └── template.txt （オプションのテンプレート）
```

これらのファイルを `SKILL.md` から参照します：

````markdown
高度な使い方については [reference.md](reference.md) を参照してください。

ヘルパースクリプトを実行します：

```bash
python scripts/helper.py input.txt
```
````

## 利用可能なスキルを表示する

`--experimental-skills` が有効な場合、Qwen Code は以下の場所からスキルを検出します：

- 個人スキル: `~/.qwen/skills/`
- プロジェクトスキル: `.qwen/skills/`

利用可能なスキルを表示するには、Qwen Code に直接尋ねてください：

```text
利用可能なスキルは何ですか？
```

またはファイルシステムを確認してください：

```bash

# 個人スキルを一覧表示
ls ~/.qwen/skills/

# プロジェクトスキルを一覧表示（プロジェクトディレクトリ内にいる場合）
ls .qwen/skills/

# 特定のスキルの内容を表示
cat ~/.qwen/skills/my-skill/SKILL.md
```

## スキルのテスト

スキルを作成した後、あなたの説明と一致する質問をしてテストしてください。

例：説明に「PDFファイル」と記載している場合：

```text
このPDFからテキストを抽出できますか？
```

モデルはリクエストに一致した場合、自動的にあなたのスキルを使用することを判断します。明示的に呼び出す必要はありません。

## スキルのデバッグ

Qwen Code があなたのスキルを使用しない場合は、以下の一般的な問題を確認してください：

### 説明を具体的にする

不十分な例：

```yaml
description: ドキュメントの作業を支援します
```

具体的な例：

```yaml
description: PDFファイルからテキストや表を抽出し、フォームに入力し、ドキュメントを結合します。PDF、フォーム、またはドキュメント抽出を扱う際に使用してください。
```

### ファイルパスを確認する

- 個人スキル: `~/.qwen/skills/<skill-name>/SKILL.md`
- プロジェクトスキル: `.qwen/skills/<skill-name>/SKILL.md`

```bash

# 個人
ls ~/.qwen/skills/my-skill/SKILL.md

# プロジェクト
ls .qwen/skills/my-skill/SKILL.md
```

### YAML構文を確認する

無効なYAMLは、スキルメタデータが正しく読み込まれることを妨げます。

```bash
cat SKILL.md | head -n 15
```

以下の点を確認してください：

- 1行目に開始の `---` があること
- Markdownコンテンツの前に終了の `---` があること
- 有効なYAML構文（タブを使用せず、正しいインデント）

### エラーを表示する

デバッグモードでQwen Codeを実行して、スキル読み込み時のエラーを確認します：

```bash
qwen --experimental-skills --debug
```

## スキルをチームと共有する

プロジェクトリポジトリを通じてスキルを共有できます。

1. `.qwen/skills/` 配下にスキルを追加する
2. コミットしてプッシュする
3. チームメンバーが変更をプルし、`--experimental-skills` で実行する

```bash
git add .qwen/skills/
git commit -m "PDF処理用のチームスキルを追加"
git push
```

## スキルを更新する

`SKILL.md` を直接編集します。

```bash

# 個人用スキル
code ~/.qwen/skills/my-skill/SKILL.md

# プロジェクトスキル
code .qwen/skills/my-skill/SKILL.md
```

変更は次回Qwen Codeを起動したときに反映されます。Qwen Codeが既に実行中の場合は、再起動して更新を読み込んでください。

## スキルを削除する

スキルディレクトリを削除してください。

```bash

# 個人用
rm -rf ~/.qwen/skills/my-skill

# プロジェクト用
rm -rf .qwen/skills/my-skill
git commit -m "未使用のスキルを削除"
```

## ベストプラクティス

### スキルは焦点を絞ってください

1つのスキルは1つの機能に対応すべきです。

- 焦点が絞られている例: 「PDFフォーム入力」、「Excel分析」、「Gitコミットメッセージ作成」
- 広範囲すぎる例: 「ドキュメント処理」（小さなスキルに分割してください）

### クリアな説明を書く

特定のトリガーを含めて、モデルがいつスキルを使用すべきか判断できるようにしてください。

```yaml
description: Excelスプレッドシートを分析し、ピボットテーブルを作成してチャートを生成します。Excelファイル、スプレッドシート、または.xlsxデータを扱う際に使用してください。
```

### チームでテストする

- スキルは期待通りにアクティブになりますか？
- 指示は明確ですか？
- 不十分な例やエッジケースはありますか？