# エージェントスキル

> Qwen Code の機能を拡張するためのスキルを作成、管理、および共有します。

このガイドでは、**Qwen Code** でエージェントスキルを作成、使用、および管理する方法を説明します。スキルとは、指示が記載されたフォルダ（およびオプションでスクリプトやリソース）を含むモジュール式の機能であり、モデルの効果を拡張します。

## 前提条件

- Qwen Code（最新バージョン）
- Qwen Code の基本的な知識（[クイックスタート](../quickstart.md)）

## エージェントスキルとは？

エージェントスキルは、専門知識をパッケージ化して検出可能な機能にまとめたものです。各スキルは、関連性がある場合にモデルが読み込める指示を含む `SKILL.md` ファイルと、オプションでスクリプトやテンプレートなどの補助ファイルで構成されます。

### スキルの呼び出し方法

スキルは**モデル呼び出し**です。モデルは、あなたのリクエストとスキルの説明に基づいて、自動的に使用するタイミングを決定します。これはスラッシュコマンドとは異なり、スラッシュコマンドは**ユーザー呼び出し**です（明示的に`/command`と入力します）。

スキルを明示的に呼び出したい場合は、`/skills`スラッシュコマンドを使用してください：

```bash
/skills <skill-name>
```

オートコンプリートを使用して、利用可能なスキルとその説明を参照できます。

### メリット

- あなたのワークフロー用にQwen Codeを拡張可能
- Git経由でチーム全体で専門知識を共有可能
- 繰り返しのプロンプト作成を削減
- 複数のスキルを組み合わせて複雑なタスクに対応

## スキルの作成

スキルは`SKILL.md`ファイルを含むディレクトリとして保存されます。

### 個人用スキル

個人用スキルはすべてのプロジェクトで利用可能です。`~/.qwen/skills/`に保存してください：

```bash
mkdir -p ~/.qwen/skills/my-skill-name
```

以下の用途に個人用スキルを使用してください：

- 個人のワークフローと設定
- 開発中のスキル
- 個人の生産性支援ツール

### プロジェクトスキル

プロジェクトスキルはチームと共有されます。プロジェクト内の `.qwen/skills/` に保存してください：

```bash
mkdir -p .qwen/skills/my-skill-name
```

以下の目的でプロジェクトスキルを使用します：

- チームのワークフローと規約
- プロジェクト固有の専門知識
- 共有されるユーティリティとスクリプト

プロジェクトスキルはgitにチェックインされ、自動的にチームメンバーが利用できるようになります。

## `SKILL.md` を作成する

YAMLフロントマターとMarkdownコンテンツを含む `SKILL.md` ファイルを作成します：

```yaml
---
name: your-skill-name
description: このスキルが何をするのか、および使用タイミングについての簡単な説明
---

# Your Skill Name

## Instructions
Qwen Codeに対する明確で段階的なガイダンスを提供してください。

## Examples
このスキルの使用例を具体的に示してください。
```

### フィールドの要件

Qwen Code は現在、以下を検証しています。

- `name` は空でない文字列
- `description` は空でない文字列

推奨される規則（まだ厳密には強制されていません）：

- `name` には小文字、数字、ハイフンを使用する
- `description` は具体的にする：**何をするか**と**いつ使用するか**（ユーザーが自然に言及するキーワード）の両方を含める

## サポートファイルの追加

`SKILL.md` と同じディレクトリに追加ファイルを作成します。

```text
my-skill/
├── SKILL.md (必須)
├── reference.md (オプションのドキュメント)
├── examples.md (オプションの例)
├── scripts/
│   └── helper.py (オプションのユーティリティ)
└── templates/
    └── template.txt (オプションのテンプレート)
```

これらのファイルを `SKILL.md` から参照します。

````markdown
高度な使い方については、[reference.md](reference.md) を参照してください。

ヘルパースクリプトを実行します。

```bash
python scripts/helper.py input.txt
```
````

## 利用可能なスキルを表示する

Qwen Code は以下の場所からスキルを検出します：

- パーソナルスキル: `~/.qwen/skills/`
- プロジェクトスキル: `.qwen/skills/`
- 拡張機能スキル: インストールされた拡張機能が提供するスキル

### 拡張機能スキル

拡張機能は、有効化された際に利用可能になるカスタムスキルを提供できます。これらのスキルは拡張機能の `skills/` ディレクトリに格納され、パーソナルスキルやプロジェクトスキルと同じ形式に従います。

拡張機能スキルは、拡張機能がインストールされて有効化されると自動的に検出・読み込まれます。

どの拡張機能がスキルを提供しているかを確認するには、拡張機能の `qwen-extension.json` ファイル内の `skills` フィールドを確認してください。

利用可能なスキルを表示するには、Qwen Code に直接尋ねてください：

```text
利用可能なスキルは何ですか？
```

またはファイルシステムを確認してください：

```bash

# パーソナルスキルを一覧表示
ls ~/.qwen/skills/

# プロジェクトスキルを一覧表示（プロジェクトディレクトリ内にいる場合）
ls .qwen/skills/

# 特定のスキルの内容を表示
cat ~/.qwen/skills/my-skill/SKILL.md
```

## スキルのテスト

スキルを作成した後、説明と一致する質問をしてテストします。

例：説明に「PDFファイル」と記載されている場合：

```text
このPDFからテキストを抽出してくれますか？
```

モデルはリクエストに一致した場合、自動的にあなたのスキルを使用することを判断します。明示的に呼び出す必要はありません。

## スキルのデバッグ

Qwen Code がスキルを使用しない場合は、以下の一般的な問題を確認してください：

### 説明を具体的にする

不十分に曖昧な場合：

```yaml
description: ドキュメントの作業を支援します
```

具体的な場合：

```yaml
description: PDFファイルからテキストと表を抽出し、フォームに入力し、ドキュメントを結合します。PDF、フォーム、またはドキュメント抽出を扱う際に使用します。
```

### ファイルパスを確認する

- 個人スキル: `~/.qwen/skills/<skill-name>/SKILL.md`
- プロジェクトスキル: `.qwen/skills/<skill-name>/SKILL.md`

```bash

# 個人
ls ~/.qwen/skills/my-skill/SKILL.md

# プロジェクト
ls .qwen/skills/my-skill/SKILL.md
```

### YAML構文を確認

無効なYAMLはスキルメタデータの正しく読み込みを妨げます。

```bash
cat SKILL.md | head -n 15
```

以下のことを確認してください：

- 1行目に開き`---`があること
- Markdownコンテンツの前に閉じ`---`があること
- 有効なYAML構文（タブを使用せず、正しいインデント）

### エラーを表示

デバッグモードでQwen Codeを実行して、スキル読み込みエラーを確認します：

```bash
qwen --debug
```

## チームとスキルを共有

プロジェクトリポジトリ経由でスキルを共有できます：

1. `.qwen/skills/` 配下にスキルを追加
2. コミットしてプッシュ
3. チームメンバーが変更をプル

```bash
git add .qwen/skills/
git commit -m "PDF処理用チームスキルを追加"
git push
```

## スキルを更新

`SKILL.md` を直接編集：

```bash

# 個人スキル
code ~/.qwen/skills/my-skill/SKILL.md

# プロジェクトスキル
code .qwen/skills/my-skill/SKILL.md
```

変更は次回Qwen Codeを起動する際に反映されます。Qwen Codeが既に実行中の場合は、再起動して更新を読み込んでください。

## スキルを削除

スキルディレクトリを削除：

```bash

# 個人用
rm -rf ~/.qwen/skills/my-skill

# プロジェクト用
rm -rf .qwen/skills/my-skill
git commit -m "未使用のスキルを削除"
```

## ベストプラクティス

### スキルは特定の目的に絞る

1つのスキルは1つの機能に対応させるべきです：

- 適切：「PDFフォーム入力」、「Excel分析」、「Gitコミットメッセージ作成」
- 広範囲すぎ：「ドキュメント処理」（小さなスキルに分割する）

### 明確な説明を書く

特定のトリガーを含めることで、モデルがいつスキルを使用すべきか判断しやすくなります：

```yaml
description: Excelスプレッドシートを分析し、ピボットテーブルを作成してチャートを生成します。Excelファイル、スプレッドシート、または.xlsxデータを扱う際に使用してください。
```

### チームでテストする

- 期待通りにスキルが起動するか？
- 指示は明確か？
- 例やエッジケースが不足していないか？