# エージェントスキル（実験的機能）

> Qwen Code の機能を拡張するためのスキルを作成、管理、共有します。

このガイドでは、**Qwen Code** でエージェントスキルを作成、使用、管理する方法を説明します。スキルはモジュール化された機能であり、指示が記載された整理されたフォルダ（およびオプションでスクリプト/リソース）を通じてモデルの有効性を拡張します。

> [!note]
>
> スキルは現在 **実験的** な機能であり、`--experimental-skills` を使用して有効化する必要があります。

## 前提条件

- Qwen Code（最新バージョン）
- 実験的フラグを有効にして実行：

```bash
qwen --experimental-skills
```

- Qwen Code への基本的な慣れ（[クイックスタート](../quickstart.md)）

## エージェントスキルとは？

エージェントスキルは、発見可能な機能として専門知識をパッケージ化します。各スキルは、関連する際にモデルが読み込める指示が記載された `SKILL.md` ファイルと、オプションでスクリプトやテンプレートなどの補助ファイルで構成されます。

### スキルの呼び出し方法

スキルは**モデル呼び出し**です。モデルは、あなたのリクエストとスキルの説明に基づいて、自動的に使用するタイミングを決定します。これはスラッシュコマンドとは異なり、スラッシュコマンドは**ユーザー呼び出し**です（明示的に`/command`と入力します）。

### メリット

- Qwen Code をワークフロー用に拡張
- Git を通じてチーム全体で専門知識を共有
- 繰り返しのプロンプト作成を削減
- 複数のスキルを組み合わせて複雑なタスクを実行

## スキルの作成

スキルは `SKILL.md` ファイルを含むディレクトリとして保存されます。

### 個人用スキル

個人用スキルは、すべてのプロジェクトで利用できます。`~/.qwen/skills/` に保存します：

```bash
mkdir -p ~/.qwen/skills/my-skill-name
```

個人用スキルの利用用途：

- 個人のワークフローと設定
- 開発中の実験的なスキル
- 個人の生産性支援ツール

### プロジェクトスキル

プロジェクトスキルはチームと共有されます。プロジェクト内の `.qwen/skills/` に保存してください：

```bash
mkdir -p .qwen/skills/my-skill-name
```

プロジェクトスキルの用途：

- チームのワークフローと規約
- プロジェクト固有の専門知識
- 共有ユーティリティとスクリプト

プロジェクトスキルはgitにチェックインされ、自動的にチームメンバーで利用可能になります。

## `SKILL.md` を作成する

YAMLフロントマターとMarkdownコンテンツを含む `SKILL.md` ファイルを作成してください：

```yaml
---
name: your-skill-name
description: このスキルが何をするのか、および使用するタイミングについての簡単な説明
---

# Your Skill Name

## Instructions
Qwen Codeに対する明確で段階的なガイダンスを提供してください。

## Examples
このスキルの使用例を具体的に示してください。
```

### フィールド要件

Qwen Code は現在、以下を検証しています。

- `name` は空でない文字列
- `description` は空でない文字列

推奨される規約（まだ厳密には強制されていません）:

- `name` には小文字、数字、ハイフンを使用する
- `description` は具体的にする: **何をするか** と **いつ使用するか** の両方を含める（ユーザーが自然に言及するキーワード）

## サポートファイルの追加

`SKILL.md` と同じディレクトリに追加ファイルを作成します。

```text
my-skill/
├── SKILL.md (必須)
├── reference.md (オプションのドキュメント)
├── examples.md (オプションの例)
├── scripts/
│   └── helper.py (オプションのユーティリティ)
└── templates/
    └── template.txt (オプションのテンプレート)
```

これらのファイルを `SKILL.md` から参照します。

````markdown
高度な使用方法については、[reference.md](reference.md) を参照してください。

ヘルパースクリプトを実行します。

```bash
python scripts/helper.py input.txt
```
````

## 利用可能なスキルを表示する

`--experimental-skills` が有効化されている場合、Qwen Code は以下の場所からスキルを検出します：

- パーソナルスキル: `~/.qwen/skills/`
- プロジェクトスキル: `.qwen/skills/`

利用可能なスキルを確認するには、Qwen Code に直接尋ねてください：

```text
利用可能なスキルは何ですか？
```

または、ファイルシステムを確認してください：

```bash

# パーソナルスキルを一覧表示
ls ~/.qwen/skills/

# プロジェクトスキルを一覧表示（プロジェクトディレクトリ内にいる場合）
ls .qwen/skills/

# 特定のスキルの内容を表示
cat ~/.qwen/skills/my-skill/SKILL.md
```

## スキルのテスト

スキルを作成した後、あなたの説明と一致する質問をしてテストしてください。

例：説明に「PDFファイル」と記載している場合：

```text
このPDFからテキストを抽出するのを手伝ってもらえますか？
```

モデルはリクエストに一致した場合、自動的にあなたのスキルを使用することを判断します。明示的に呼び出す必要はありません。

## スキルのデバッグ

Qwen Code があなたのスキルを使用しない場合、以下の一般的な問題を確認してください：

### 説明を具体的にする

不十分な例:

```yaml
description: ドキュメントを支援します
```

具体的な例:

```yaml
description: PDFファイルからテキストや表を抽出し、フォームに記入し、ドキュメントを結合します。PDF、フォーム、またはドキュメント抽出を扱う際に使用します。
```

### ファイルパスを確認する

- パーソナルスキル: `~/.qwen/skills/<skill-name>/SKILL.md`
- プロジェクトスキル: `.qwen/skills/<skill-name>/SKILL.md`

```bash

# パーソナル
ls ~/.qwen/skills/my-skill/SKILL.md

# プロジェクト
ls .qwen/skills/my-skill/SKILL.md
```

### YAML構文を確認する

無効なYAMLはスキルメタデータの正しく読み込みを妨げます。

```bash
cat SKILL.md | head -n 15
```

以下の点を確認してください:

- 1行目に `---` が開いている
- Markdownコンテンツの前に `---` が閉じている
- 有効なYAML構文（タブを使用せず、正しいインデント）

### エラーを確認する

デバッグモードでQwen Codeを実行して、スキル読み込み時のエラーを確認します:

```bash
qwen --experimental-skills --debug
```

## スキルをチームと共有する

プロジェクトリポジトリを通じてスキルを共有できます。

1. `.qwen/skills/` 配下にスキルを追加する
2. コミットしてプッシュする
3. チームメイトが変更をプルして `--experimental-skills` で実行する

```bash
git add .qwen/skills/
git commit -m "PDF処理用チームスキルを追加"
git push
```

## スキルを更新する

`SKILL.md` を直接編集します。

```bash

# 個人用スキル
code ~/.qwen/skills/my-skill/SKILL.md

# プロジェクトスキル
code .qwen/skills/my-skill/SKILL.md
```

変更は次回Qwen Codeを起動したときに反映されます。Qwen Codeが既に実行中の場合は、更新を読み込むために再起動してください。

## スキルを削除する

スキルディレクトリを削除します。

```bash

# 個人用
rm -rf ~/.qwen/skills/my-skill

# プロジェクト用
rm -rf .qwen/skills/my-skill
git commit -m "未使用のスキルを削除"
```

## ベストプラクティス

### スキルは焦点を絞ってください

1つのスキルは1つの機能に焦点を当てるべきです。

- 焦点が絞られている例: 「PDFフォーム入力」、「Excel分析」、「Gitコミットメッセージ」
- 広範囲すぎる例: 「ドキュメント処理」（小さなスキルに分割してください）

### クリアな説明を書く

特定のトリガーを含めて、モデルがSkillsを使用するタイミングを特定できるようにしてください。

```yaml
description: Excelスプレッドシートを分析し、ピボットテーブルを作成し、チャートを生成します。Excelファイル、スプレッドシート、または.xlsxデータを扱う際に使用してください。
```

### チームでテストする

- 期待通りにSkillが起動しますか？
- 指示は明確ですか？
- 不足している例やエッジケースはありますか？