# エージェントスキル（実験的機能）

> Qwen Code の機能を拡張するためのスキルを作成、管理、および共有します。

このガイドでは、**Qwen Code** でエージェントスキルを作成、使用、および管理する方法を説明します。スキルはモジュール化された機能であり、指示が記載されたフォルダ（オプションでスクリプトやリソースも含む）を整理してモデルの効果を拡張します。

> [!note]
>
> スキルは現在**実験的な機能**であり、`--experimental-skills` を有効にして使用する必要があります。

## 前提条件

- Qwen Code（最新バージョン）
- 実験的フラグを有効にして実行：

```bash
qwen --experimental-skills
```

- Qwen Code の基本的な知識（[クイックスタート](../quickstart.md)）

## エージェントスキルとは？

エージェントスキルは、発見可能な形で専門知識をパッケージ化したものです。各スキルは、関連性がある場合にモデルが読み込める指示が記載された `SKILL.md` ファイルと、オプションでスクリプトやテンプレートなどの補助ファイルで構成されます。

### スキルの呼び出し方法

スキルは**モデル呼び出し**です。モデルは、あなたのリクエストとスキルの説明に基づいて、自主的に使用するタイミングを決定します。これはスラッシュコマンドとは異なり、スラッシュコマンドは**ユーザー呼び出し**です（あなたが明示的に`/command`と入力します）。

スキルを明示的に呼び出したい場合は、`/skills`スラッシュコマンドを使用してください：

```bash
/skills <skill-name>
```

`/skills`コマンドは、`--experimental-skills`で実行している場合にのみ利用できます。オートコンプリートを使用して、利用可能なスキルとその説明を参照してください。

### 利点

- ワークフロー用にQwen Codeを拡張する
- Git経由でチーム全体で専門知識を共有する
- 繰り返しのプロンプト作成を削減する
- 複数のスキルを組み合わせて複雑なタスクを処理する

## スキルを作成する

スキルは`SKILL.md`ファイルを含むディレクトリとして保存されます。

### パーソナルスキル

パーソナルスキルは、すべてのプロジェクトで利用できます。`~/.qwen/skills/` に保存してください。

```bash
mkdir -p ~/.qwen/skills/my-skill-name
```

以下の用途にパーソナルスキルを使用してください：

- 個人のワークフローや設定
- 開発中の実験的なスキル
- 個人用の生産性支援ツール

### プロジェクトスキル

プロジェクトスキルはチームと共有されます。プロジェクト内の `.qwen/skills/` に保存してください。

```bash
mkdir -p .qwen/skills/my-skill-name
```

以下の用途にプロジェクトスキルを使用してください：

- チームのワークフローおよび規約
- プロジェクト固有の専門知識
- 共有ユーティリティおよびスクリプト

プロジェクトスキルは Git にチェックインされ、自動的にチームメンバーで利用可能になります。

## `SKILL.md` を作成する

YAML フロントマターと Markdown コンテンツを含む `SKILL.md` ファイルを作成します。

```yaml
---
name: your-skill-name
description: このスキルが何をするのか、および使用タイミングについての簡単な説明
---

# Your Skill Name

## Instructions
Qwen Code に対する明確かつ段階的なガイダンスを提供してください。

## 例
このスキルの使用方法を具体的に示します。

### フィールド要件

Qwen Code は現在、以下を検証しています：

- `name` は空でない文字列
- `description` は空でない文字列

推奨される規則（まだ厳密には強制されていません）：

- `name` には小文字、数字、ハイフンを使用してください
- `description` は具体的にしてください：**何をするか**と**いつ使用するか**（ユーザーが自然に言及するキーワード）の両方を含めてください

## サポートファイルを追加する

`SKILL.md` と同じディレクトリに追加ファイルを作成します：

```text
my-skill/
├── SKILL.md （必須）
├── reference.md （オプションのドキュメント）
├── examples.md （オプションの例）
├── scripts/
│   └── helper.py （オプションのユーティリティ）
└── templates/
    └── template.txt （オプションのテンプレート）
```

これらのファイルを `SKILL.md` から参照します：

````markdown
詳細な使用方法については、[reference.md](reference.md) を参照してください。

ヘルパースクリプトを実行します：

```bash
python scripts/helper.py input.txt
```
````

## 利用可能なスキルを表示する

`--experimental-skills` が有効になっている場合、Qwen Code は以下の場所からスキルを検出します：

- 個人用スキル: `~/.qwen/skills/`
- プロジェクトスキル: `.qwen/skills/`

利用可能なスキルを表示するには、Qwen Code に直接尋ねてください：

```text
利用可能なスキルは何ですか？
```

または、ファイルシステムを確認してください：

```bash

# 個人用スキルを一覧表示
ls ~/.qwen/skills/

# プロジェクトスキルを一覧表示（プロジェクトディレクトリ内にいる場合）
ls .qwen/skills/

# 特定のスキルの内容を表示
cat ~/.qwen/skills/my-skill/SKILL.md
```

## スキルをテストする

スキルを作成した後、説明と一致する質問をしてテストしてください。

例：説明に「PDFファイル」と記載されている場合：

```text
このPDFからテキストを抽出してくれますか？
```

モデルはリクエストに一致した場合、自動的にあなたのスキルを使用することを判断します。明示的に呼び出す必要はありません。

## スキルをデバッグする

Qwen Code があなたのスキルを使用しない場合は、以下の一般的な問題を確認してください：

### 説明を具体的にする

不明確すぎる例：

```yaml
description: ドキュメントの作業を支援します
```

具体的な例：

```yaml
description: PDFファイルからテキストや表を抽出し、フォームに記入し、ドキュメントを結合します。PDF、フォーム、またはドキュメント抽出を扱う際に使用してください。
```

### ファイルパスを確認する

- 個人スキル: `~/.qwen/skills/<skill-name>/SKILL.md`
- プロジェクトスキル: `.qwen/skills/<skill-name>/SKILL.md`

```bash

# 個人
ls ~/.qwen/skills/my-skill/SKILL.md

# プロジェクト
ls .qwen/skills/my-skill/SKILL.md
```

### YAML構文を確認する

無効なYAMLは、スキルメタデータが正しく読み込まれるのを妨げます。

```bash
cat SKILL.md | head -n 15
```

以下の点を確認してください：

- 1行目に開始の `---` があること
- Markdownコンテンツの前に終了の `---` があること
- 有効なYAML構文（タブを使用せず、正しいインデント）

### エラーを表示する

デバッグモードでQwen Codeを実行して、スキル読み込み時のエラーを確認してください：

```bash
qwen --experimental-skills --debug
```

## スキルをチームと共有する

プロジェクトリポジトリを通じてスキルを共有できます。

1. `.qwen/skills/` 以下にスキルを追加する
2. コミットしてプッシュする
3. チームメンバーが変更をプルし、`--experimental-skills` で実行する

```bash
git add .qwen/skills/
git commit -m "PDF処理用のチームスキルを追加"
git push
```

## スキルの更新

`SKILL.md` を直接編集します。

```bash

# 個人用スキル
code ~/.qwen/skills/my-skill/SKILL.md

# プロジェクトスキル
code .qwen/skills/my-skill/SKILL.md
```

変更は次回Qwen Codeを起動したときに反映されます。Qwen Codeが既に実行中の場合は、更新を読み込むために再起動してください。

## スキルの削除

スキルディレクトリを削除します。

```bash

# 個人用
rm -rf ~/.qwen/skills/my-skill

# プロジェクト用
rm -rf .qwen/skills/my-skill
git commit -m "未使用のスキルを削除"
```

## ベストプラクティス

### スキルは焦点を絞ってください

1つのスキルは1つの機能に対応させるべきです。

- 焦点が当たっている例: 「PDFフォーム入力」、「Excel分析」、「Gitコミットメッセージ」
- 広範囲すぎる例: 「ドキュメント処理」（小さなスキルに分割してください）

### クリアな説明を書く

特定のトリガーを含めることで、モデルがスキルを使用するタイミングを判断できるように支援します。

```yaml
description: Excelスプレッドシートを分析し、ピボットテーブルを作成してチャートを生成します。Excelファイル、スプレッドシート、または.xlsxデータを扱う際に使用してください。
```

### チームでテストする

- スキルは期待通りにアクティブになりますか？
- 指示は明確ですか？
- 例やエッジケースが不足していませんか？