# Доверенные папки

Функция доверенных папок — это настройка безопасности, которая позволяет вам контролировать, какие проекты могут использовать все возможности Qwen Code. Она предотвращает запуск потенциально вредоносного кода, запрашивая ваше подтверждение перед тем, как CLI загружает любые специфичные для проекта конфигурации из этой папки.

## Включение функции

Функция доверенных папок **по умолчанию отключена**. Чтобы её использовать, сначала необходимо включить её в ваших настройках.

Добавьте следующее в ваш файл `settings.json` пользователя:

```json
{
  "security": {
    "folderTrust": {
      "enabled": true
    }
  }
}
```

## Как это работает: диалог доверия

После включения функции при первом запуске Qwen Code из папки автоматически появится диалоговое окно с предложением сделать выбор:

- **Доверять папке**: предоставляет полное доверие к текущей папке (например, `my-project`).
- **Доверять родительской папке**: предоставляет доверие к родительскому каталогу (например, `safe-projects`), который автоматически распространяет доверие на все подкаталоги. Это удобно, если вы храните все свои безопасные проекты в одном месте.
- **Не доверять**: помечает папку как ненадежную. CLI будет работать в ограниченном «безопасном режиме».

Ваш выбор сохраняется в центральном файле (`~/.qwen/trustedFolders.json`), поэтому вас спросят только один раз для каждой папки.

## Почему Важно Доверие: Влияние Недоверенного Рабочего Пространства

Когда папка является **недоверенной**, Qwen Code запускается в ограниченном «безопасном режиме» для вашей защиты. В этом режиме следующие функции отключены:

1.  **Настройки рабочего пространства игнорируются**: CLI **не** загружает файл `.qwen/settings.json` из проекта. Это предотвращает загрузку пользовательских инструментов и других потенциально опасных конфигураций.

2.  **Переменные окружения игнорируются**: CLI **не** загружает какие-либо файлы `.env` из проекта.

3.  **Управление расширениями ограничено**: Вы **не можете устанавливать, обновлять или удалять** расширения.

4.  **Автоматическое принятие инструментов отключено**: Перед запуском любого инструмента вы всегда будете получать запрос, даже если автоматическое принятие включено глобально.

5.  **Автоматическая загрузка памяти отключена**: CLI не будет автоматически загружать файлы в контекст из директорий, указанных в локальных настройках.

Предоставление доверия папке разблокирует полный функционал Qwen Code для этого рабочего пространства.

## Управление настройками доверия

Если вам нужно изменить решение или просмотреть все настройки, у вас есть несколько вариантов:

- **Изменить уровень доверия для текущей папки**: Выполните команду `/permissions` из интерфейса командной строки (CLI). Откроется то же интерактивное диалоговое окно, где вы сможете изменить уровень доверия для текущей папки.

- **Просмотр всех правил доверия**: Чтобы увидеть полный список всех правил доверенных и недоверенных папок, можно проверить содержимое файла `~/.qwen/trustedFolders.json` в вашем домашнем каталоге.

## Процесс проверки доверия (для продвинутых пользователей)

Для продвинутых пользователей будет полезно знать точный порядок операций, по которому определяется уровень доверия:

1.  **Сигнал доверия от IDE**: Если вы используете [интеграцию с IDE](../ide-integration/ide-integration), CLI сначала запрашивает у IDE информацию о том, является ли рабочее пространство доверенным. Ответ IDE имеет наивысший приоритет.

2.  **Локальный файл доверия**: Если IDE не подключена, CLI проверяет центральный файл `~/.qwen/trustedFolders.json`.