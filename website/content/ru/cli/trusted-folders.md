# Доверенные папки

Функция Trusted Folders — это настройка безопасности, которая позволяет вам контролировать, какие проекты могут использовать все возможности Qwen Code. Она предотвращает запуск потенциально вредоносного кода, запрашивая ваше подтверждение перед тем, как CLI загружает любые конфигурации, специфичные для проекта, из этой папки.

## Включение функции

Функция Trusted Folders **по умолчанию отключена**. Чтобы использовать её, сначала необходимо включить в настройках.

Добавьте следующее в ваш файл `settings.json` пользователя:

```json
{
  "security": {
    "folderTrust": {
      "enabled": true
    }
  }
}
```

## Как это работает: диалог доверия

После включения функции при первом запуске Qwen Code из папки автоматически появится диалоговое окно с предложением сделать выбор:

- **Trust folder**: предоставляет полное доверие текущей папке (например, `my-project`).
- **Trust parent folder**: предоставляет доверие родительской директории (например, `safe-projects`), что автоматически распространяется и на все её подкаталоги. Это удобно, если вы храните все свои безопасные проекты в одном месте.
- **Don't trust**: помечает папку как ненадёжную. CLI будет работать в ограниченном режиме «безопасный режим».

Ваш выбор сохраняется в центральном файле (`~/.qwen/trustedFolders.json`), поэтому вас спросят только один раз для каждой папки.

## Почему Важно Доверие: Влияние Недоверенного Рабочего Пространства

Когда папка является **недоверенной**, Qwen Code запускается в ограниченном режиме "безопасности", чтобы защитить вас. В этом режиме следующие функции отключены:

1.  **Настройки Рабочего Пространства Игнорируются**: CLI **не** загружает файл `.qwen/settings.json` из проекта. Это предотвращает загрузку пользовательских инструментов и других потенциально опасных конфигураций.

2.  **Переменные Окружения Игнорируются**: CLI **не** загружает никакие `.env` файлы из проекта.

3.  **Управление Расширениями Ограничено**: Вы **не можете устанавливать, обновлять или удалять** расширения.

4.  **Автоматическое Принятие Инструментов Отключено**: Перед запуском любого инструмента вы всегда будете получать запрос, даже если у вас глобально включено автоматическое принятие.

5.  **Автоматическая Загрузка Памяти Отключена**: CLI не будет автоматически загружать файлы в контекст из директорий, указанных в локальных настройках.

Предоставление доверия папке разблокирует полный функционал Qwen Code для этого рабочего пространства.

## Управление настройками доверия

Если вам нужно изменить решение или посмотреть все настройки, у вас есть несколько вариантов:

- **Изменить уровень доверия для текущей папки**: Выполните команду `/permissions` из CLI. Откроется то же интерактивное диалоговое окно, где вы сможете изменить уровень доверия для текущей папки.

- **Просмотр всех правил доверия**: Чтобы увидеть полный список всех правил для доверенных и недоверенных папок, вы можете открыть файл `~/.qwen/trustedFolders.json` в вашей домашней директории.

## Процесс проверки доверия (для продвинутых пользователей)

Для продвинутых пользователей будет полезно знать точный порядок операций, по которому определяется уровень доверия:

1.  **Сигнал доверия от IDE**: Если вы используете [интеграцию с IDE](./ide-integration.md), CLI сначала запрашивает у IDE, является ли рабочая область доверенной. Ответ IDE имеет наивысший приоритет.

2.  **Локальный файл доверия**: Если IDE не подключена, CLI проверяет центральный файл `~/.qwen/trustedFolders.json`.