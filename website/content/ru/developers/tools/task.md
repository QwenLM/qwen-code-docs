# Инструмент задач (`task`)

Этот документ описывает инструмент `task` для Qwen Code.

## Описание

Используйте `task` для запуска специализированного субагента, который будет автономно обрабатывать сложные многоэтапные задачи. Инструмент Task делегирует работу специализированным агентам, которые могут работать независимо и иметь доступ к собственному набору инструментов, что позволяет выполнять задачи параллельно и использовать специализированные знания.

### Аргументы

`task` принимает следующие аргументы:

- `description` (строка, обязательный): Краткое (3-5 слов) описание задачи для отображения и отслеживания пользователем.
- `prompt` (строка, обязательный): Подробная инструкция для субагента. Должна содержать исчерпывающие указания для автономного выполнения.
- `subagent_type` (строка, обязательный): Тип специализированного агента, который будет использоваться для этой задачи. Должен соответствовать одному из настроенных доступных субагентов.

## Как использовать `task` с Qwen Code

Инструмент Task динамически загружает доступные подагенты из вашей конфигурации и делегирует им задачи. Каждый подагент выполняется независимо и может использовать свой собственный набор инструментов, что позволяет получить специализированную экспертизу и параллельное выполнение.

Когда вы используете инструмент Task, подагент будет:

1. Получать приглашение к задаче с полной автономией
2. Выполнять задачу, используя доступные инструменты
3. Возвращать окончательное сообщение с результатом
4. Завершаться (подагенты не имеют состояния и одноразовые)

Использование:

```
task(description="Краткое описание задачи", prompt="Подробные инструкции для подагента по выполнению задачи", subagent_type="agent_name")
```

## Доступные подагенты

Доступные подагенты зависят от вашей конфигурации. Типичные виды подагентов могут включать:

- **general-purpose**: Для сложных многошаговых задач, требующих различных инструментов
- **code-reviewer**: Для проверки и анализа качества кода
- **test-runner**: Для запуска тестов и анализа результатов
- **documentation-writer**: Для создания и обновления документации

Вы можете просмотреть доступные подагенты, используя команду `/agents` в Qwen Code.

## Возможности инструмента Task

### Обновления прогресса в реальном времени

Инструмент Task предоставляет актуальные обновления, отображая:

- Статус выполнения подагента
- Отдельные вызовы инструментов, выполняемые подагентом
- Результаты вызовов инструментов и возможные ошибки
- Общий прогресс задачи и статус завершения

### Параллельное выполнение

Вы можете запустить несколько подагентов одновременно, вызвав инструмент Task несколько раз в одном сообщении, что позволяет выполнять задачи параллельно и повышает эффективность.

### Специализированная экспертиза

Каждый субагент может быть настроен со следующими параметрами:

- Конкретные разрешения доступа к инструментам
- Специализированные системные подсказки и инструкции
- Пользовательские конфигурации модели
- Предметно-ориентированные знания и возможности

## Примеры `task`

### Делегирование общему агенту

```
task(
  description="Рефакторинг кода",
  prompt="Пожалуйста, выполните рефакторинг модуля аутентификации в src/auth/, чтобы использовать современные паттерны async/await вместо обратных вызовов. Убедитесь, что все тесты по-прежнему проходят, и обновите связанную документацию.",
  subagent_type="general-purpose"
)
```

### Выполнение параллельных задач

```

# Запуск проверки кода и выполнения тестов параллельно
task(
  description="Проверка кода",
  prompt="Проверьте последние изменения в модуле управления пользователями на качество кода, проблемы безопасности и соблюдение лучших практик.",
  subagent_type="code-reviewer"
)

task(
  description="Запуск тестов",
  prompt="Выполните полный набор тестов и проанализируйте возможные сбои. Предоставьте сводку по покрытию тестами и рекомендации по улучшению.",
  subagent_type="test-runner"
)
```

### Генерация документации

```
task(
  description="Обновление документации",
  prompt="Создайте подробную документацию API для новых реализованных REST-эндпоинтов в модуле заказов. Включите примеры запросов/ответов и коды ошибок.",
  subagent_type="documentation-writer"
)
```

## Когда использовать инструмент Task

Используйте инструмент Task в следующих случаях:

1. **Сложные многоэтапные задачи** — Задачи, требующие выполнения нескольких операций, которые могут выполняться автономно
2. **Специализированная экспертиза** — Задачи, где важны предметно-ориентированные знания или инструменты
3. **Параллельное выполнение** — Когда у вас есть несколько независимых задач, которые можно выполнять одновременно
4. **Необходимость делегирования** — Когда вы хотите передать выполнение целостной задачи, а не управлять каждым шагом вручную
5. **Ресурсоемкие операции** — Задачи, которые могут занимать значительное время или требовать больших вычислительных ресурсов

## Когда НЕ следует использовать инструмент Task

Не используйте инструмент Task для:

- **Простых, одношаговых операций** — Используйте прямые инструменты, такие как Read, Edit и т. д.
- **Интерактивных задач** — Задач, требующих постоянного обмена информацией туда и обратно
- **Чтения конкретных файлов** — Для лучшей производительности используйте инструмент Read напрямую
- **Простых поисков** — Используйте инструменты Grep или Glob напрямую

## Важные замечания

- **Без состояния**: Каждый вызов субагента независим и не сохраняет память о предыдущих выполнениях
- **Единичная коммуникация**: Субагенты предоставляют одно окончательное сообщение с результатом — без постоянной связи
- **Полные подсказки**: Ваша подсказка должна содержать весь необходимый контекст и инструкции для автономного выполнения
- **Доступ к инструментам**: Субагенты имеют доступ только к инструментам, настроенным в их конкретной конфигурации
- **Параллельная работа**: Несколько субагентов могут работать одновременно для повышения эффективности
- **Зависит от конфигурации**: Доступные типы субагентов зависят от конфигурации вашей системы

## Конфигурация

Субагенты настраиваются через систему конфигурации агентов Qwen Code. Используйте команду `/agents`, чтобы:

- Просмотреть доступные субагенты
- Создать новые конфигурации субагентов
- Изменить существующие настройки субагентов
- Настроить разрешения и возможности инструментов

Для получения дополнительной информации о настройке субагентов обратитесь к документации по субагентам.