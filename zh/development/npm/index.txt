3:I[4707,[],""]
6:I[36423,[],""]
8:I[78400,["3185","static/chunks/app/layout-761af432b1d1054f.js"],"FontLoader"]
4:["lang","zh","d"]
5:["mdxPath","development/npm","oc"]
0:["wJXbFWpokHYuICLOsRNkT",[[["",{"children":[["lang","zh","d"],{"children":[["mdxPath","development/npm","oc"],{"children":["__PAGE__?{\"lang\":\"zh\",\"mdxPath\":[\"development\",\"npm\"]}",{}]}]}]},"$undefined","$undefined",true],["",{"children":[["lang","zh","d"],{"children":[["mdxPath","development/npm","oc"],{"children":["__PAGE__",{},[["$L1","$L2",[["$","link","0",{"rel":"stylesheet","href":"/qwen-code-docs/_next/static/css/4147ca9488f8eaab.css","precedence":"next","crossOrigin":"$undefined"}]]],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children","$5","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[null,"$L7"],null],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/qwen-code-docs/_next/static/css/7fba7395046b8eaa.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"suppressHydrationWarning":true,"children":[["$","head",null,{"children":["$undefined",["$","style",null,{"children":":root {\n  --nextra-primary-hue: 248deg;\n  --nextra-primary-saturation: 74%;\n  --nextra-primary-lightness: 45%;\n  --nextra-bg: 250,250,250;\n  --nextra-content-width: 90rem;\n}\n.dark {\n  --nextra-primary-hue: 248deg;\n  --nextra-primary-saturation: 74%;\n  --nextra-primary-lightness: 55%;\n  --nextra-bg: 17,17,17;\n}\n::selection {\n  background: hsla(var(--nextra-primary-hue),var(--nextra-primary-saturation),var(--nextra-primary-lightness),.3);\n}\nhtml {\n  background: rgb(var(--nextra-bg));\n}"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"rgb(250,250,250)"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"rgb(17,17,17)"}],"$undefined"]}],["$","body",null,{"children":[["$","$L8",null,{}],["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]]}]]}]],null],null],["$L9",null]]]]
a:I[54108,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"ThemeConfigProvider"]
b:I[16016,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"LastUpdated"]
c:I[30763,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"Search"]
d:I[25922,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"ThemeProvider"]
e:I[94328,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"SkipNavLink"]
f:I[17691,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"ConfigProvider"]
10:I[72972,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],""]
11:I[88212,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"ClientNavbar"]
13:I[32594,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"LanguageDropdown"]
14:I[57191,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"MobileNav"]
15:I[18960,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"TOCProvider"]
16:"$Sreact.fragment"
17:I[57191,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"Sidebar"]
18:I[98270,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"ClientWrapper"]
19:I[56099,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"HeadingAnchor"]
1a:I[98451,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"ToggleWordWrapButton"]
1b:I[20735,["5501","static/chunks/c16f53c3-b998f97655e65347.js","1105","static/chunks/1105-e07e82095c5c7b4a.js","5524","static/chunks/5524-d228bcaedae4ecb3.js","2770","static/chunks/2770-e894e62890be5e00.js","1084","static/chunks/app/%5Blang%5D/layout-945024cd464e9769.js"],"Mermaid"]
12:T481,M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z7:["$","$La",null,{"value":{"children":"$undefined","darkMode":true,"docsRepositoryBase":"https://github.com/QwenLM/qwen-code/blob/main/docs","editLink":"Edit this page","feedback":{"content":"Question? Give us feedback","labels":"feedback"},"i18n":[{"locale":"en","name":"English"},{"locale":"zh","name":"中文"},{"locale":"de","name":"Deutsch"},{"locale":"fr","name":"Français"},{"locale":"ru","name":"Русский"},{"locale":"ja","name":"日本語"},{"locale":"pt-BR","name":"Português (BR)"}],"lastUpdated":["$","$Lb",null,{}],"navigation":{"next":true,"prev":true},"search":["$","$Lc",null,{}],"sidebar":{"defaultMenuCollapseLevel":1,"defaultOpen":true,"toggleButton":true,"autoCollapse":false},"themeSwitch":{"dark":"Dark","light":"Light","system":"System"},"toc":{"backToTop":"Scroll to top","float":true,"title":"On This Page"}},"children":["$","$Ld",null,{"attribute":"class","defaultTheme":"light","disableTransitionOnChange":true,"storageKey":"theme","children":[["$","$Le",null,{}],"$undefined",["$","$Lf",null,{"pageMap":[{"data":{"index":{"title":"欢迎使用 Qwen Code"},"cli":{"title":"CLI"},"core":{"title":"核心功能"},"tools":{"title":"工具"},"features":{"title":"特性"},"ide-integration":{"title":"IDE 集成"},"development":{"title":"开发指南"},"support":{"title":"支持"}}},{"name":"index","route":"/zh","frontMatter":{"title":"欢迎阅读 Qwen Code 文档","filePath":"content/zh/index.md","timestamp":1761189884000},"title":"欢迎使用 Qwen Code"},{"name":"cli","route":"/zh/cli","children":[{"data":{"index":{"title":"简介"},"authentication":{"title":"认证"},"openai-auth":{"title":"OpenAI 认证"},"commands":{"title":"命令"},"configuration":{"title":"配置"},"configuration-v1":{"title":"配置 (v1)"},"themes":{"title":"主题"},"tutorials":{"title":"教程"},"keyboard-shortcuts":{"title":"键盘快捷键"},"trusted-folders":{"title":"可信文件夹"},"qwen-ignore":{"title":"忽略文件"},"Uninstall":{"title":"卸载"}}},{"name":"index","route":"/zh/cli","frontMatter":{"title":"Qwen Code CLI","filePath":"content/zh/cli/index.md","timestamp":1761189884000},"title":"简介"},{"name":"authentication","route":"/zh/cli/authentication","frontMatter":{"title":"认证设置","filePath":"content/zh/cli/authentication.md","timestamp":1761189884000},"title":"认证"},{"name":"openai-auth","route":"/zh/cli/openai-auth","frontMatter":{"title":"OpenAI 认证","filePath":"content/zh/cli/openai-auth.md","timestamp":1761189884000},"title":"OpenAI 认证"},{"name":"commands","route":"/zh/cli/commands","frontMatter":{"title":"CLI 命令","filePath":"content/zh/cli/commands.md","timestamp":1761189884000},"title":"命令"},{"name":"configuration","route":"/zh/cli/configuration","frontMatter":{"title":"Qwen Code 配置","filePath":"content/zh/cli/configuration.md","timestamp":1761189884000},"title":"配置"},{"name":"configuration-v1","route":"/zh/cli/configuration-v1","frontMatter":{"title":"Qwen Code 配置","filePath":"content/zh/cli/configuration-v1.md","timestamp":1761189884000},"title":"配置 (v1)"},{"name":"themes","route":"/zh/cli/themes","frontMatter":{"title":"主题","filePath":"content/zh/cli/themes.md","timestamp":1761189884000},"title":"主题"},{"name":"tutorials","route":"/zh/cli/tutorials","frontMatter":{"title":"教程","filePath":"content/zh/cli/tutorials.md","timestamp":1761189884000},"title":"教程"},{"name":"keyboard-shortcuts","route":"/zh/cli/keyboard-shortcuts","frontMatter":{"title":"Qwen Code 键盘快捷键","filePath":"content/zh/cli/keyboard-shortcuts.md","timestamp":1761189884000},"title":"键盘快捷键"},{"name":"trusted-folders","route":"/zh/cli/trusted-folders","frontMatter":{"title":"可信文件夹","filePath":"content/zh/cli/trusted-folders.md","timestamp":1761189884000},"title":"可信文件夹"},{"name":"qwen-ignore","route":"/zh/cli/qwen-ignore","frontMatter":{"title":"忽略文件","filePath":"content/zh/cli/qwen-ignore.md","timestamp":1761189884000},"title":"忽略文件"},{"name":"Uninstall","route":"/zh/cli/Uninstall","frontMatter":{"title":"卸载 CLI","filePath":"content/zh/cli/Uninstall.md","timestamp":1761189884000},"title":"卸载"}],"title":"CLI"},{"name":"core","route":"/zh/core","children":[{"name":"index","route":"/zh/core","frontMatter":{"title":"Qwen Code Core","filePath":"content/zh/core/index.md","timestamp":1761189884000},"title":"Qwen Code Core"},{"name":"memport","route":"/zh/core/memport","frontMatter":{"title":"Memory Import Processor","filePath":"content/zh/core/memport.md","timestamp":1761189884000},"title":"Memory Import Processor"},{"name":"tools-api","route":"/zh/core/tools-api","frontMatter":{"title":"Qwen Code Core: Tools API","filePath":"content/zh/core/tools-api.md","timestamp":1761189884000},"title":"Qwen Code Core: Tools API"}],"title":"核心功能"},{"name":"tools","route":"/zh/tools","children":[{"data":{"index":{"title":"简介"},"file-system":{"title":"文件系统"},"multi-file":{"title":"多文件读取"},"shell":{"title":"Shell"},"todo-write":{"title":"待办写入"},"web-fetch":{"title":"Web 获取"},"web-search":{"title":"Web 搜索"},"memory":{"title":"内存"},"mcp-server":{"title":"MCP 服务器"}}},{"name":"index","route":"/zh/tools","frontMatter":{"title":"Qwen Code 工具","filePath":"content/zh/tools/index.md","timestamp":1761189884000},"title":"简介"},{"name":"file-system","route":"/zh/tools/file-system","frontMatter":{"title":"Qwen Code 文件系统工具","filePath":"content/zh/tools/file-system.md","timestamp":1761189884000},"title":"文件系统"},{"name":"multi-file","route":"/zh/tools/multi-file","frontMatter":{"title":"多文件读取工具 (read_many_files)","filePath":"content/zh/tools/multi-file.md","timestamp":1761189884000},"title":"多文件读取"},{"name":"shell","route":"/zh/tools/shell","frontMatter":{"title":"Shell 工具 (run_shell_command)","filePath":"content/zh/tools/shell.md","timestamp":1761189884000},"title":"Shell"},{"name":"todo-write","route":"/zh/tools/todo-write","frontMatter":{"title":"Todo Write Tool (todo_write)","filePath":"content/zh/tools/todo-write.md","timestamp":1761189884000},"title":"待办写入"},{"name":"web-fetch","route":"/zh/tools/web-fetch","frontMatter":{"title":"Web Fetch Tool (web_fetch)","filePath":"content/zh/tools/web-fetch.md","timestamp":1761189884000},"title":"Web 获取"},{"name":"web-search","route":"/zh/tools/web-search","frontMatter":{"title":"Web Search Tool (web_search)","filePath":"content/zh/tools/web-search.md","timestamp":1761189884000},"title":"Web 搜索"},{"name":"memory","route":"/zh/tools/memory","frontMatter":{"title":"Memory Tool (save_memory)","filePath":"content/zh/tools/memory.md","timestamp":1761189884000},"title":"内存"},{"name":"mcp-server","route":"/zh/tools/mcp-server","frontMatter":{"title":"使用 Qwen Code 的 MCP 服务器","filePath":"content/zh/tools/mcp-server.md","timestamp":1761189884000},"title":"MCP 服务器"}],"title":"工具"},{"name":"features","route":"/zh/features","children":[{"data":{"subagents":{"title":"子代理"},"checkpointing":{"title":"检查点"},"sandbox":{"title":"沙箱支持"},"headless":{"title":"无头模式"},"welcome-back":{"title":"欢迎回来"},"token-caching":{"title":"Token 缓存"}}},{"name":"subagents","route":"/zh/features/subagents","frontMatter":{"title":"Subagents","filePath":"content/zh/features/subagents.md","timestamp":1761189884000},"title":"子代理"},{"name":"checkpointing","route":"/zh/features/checkpointing","frontMatter":{"title":"Checkpointing","filePath":"content/zh/features/checkpointing.md","timestamp":1761189884000},"title":"检查点"},{"name":"sandbox","route":"/zh/features/sandbox","frontMatter":{"title":"Qwen Code 中的沙箱机制","filePath":"content/zh/features/sandbox.md","timestamp":1761189884000},"title":"沙箱支持"},{"name":"headless","route":"/zh/features/headless","frontMatter":{"title":"无头模式（Headless Mode）","filePath":"content/zh/features/headless.md","timestamp":1761189884000},"title":"无头模式"},{"name":"welcome-back","route":"/zh/features/welcome-back","frontMatter":{"title":"欢迎回来功能","filePath":"content/zh/features/welcome-back.md","timestamp":1761189884000},"title":"欢迎回来"},{"name":"token-caching","route":"/zh/features/token-caching","frontMatter":{"title":"Token 缓存与成本优化","filePath":"content/zh/features/token-caching.md","timestamp":1761189884000},"title":"Token 缓存"}],"title":"特性"},{"name":"ide-integration","route":"/zh/ide-integration","children":[{"data":{"ide-integration":{"title":"介绍"},"ide-companion-spec":{"title":"IDE Companion 规范"}}},{"name":"ide-integration","route":"/zh/ide-integration/ide-integration","frontMatter":{"title":"IDE 集成","filePath":"content/zh/ide-integration/ide-integration.md","timestamp":1761189884000},"title":"介绍"},{"name":"ide-companion-spec","route":"/zh/ide-integration/ide-companion-spec","frontMatter":{"title":"Qwen Code Companion Plugin：接口规范","filePath":"content/zh/ide-integration/ide-companion-spec.md","timestamp":1761189884000},"title":"IDE Companion 规范"}],"title":"IDE 集成"},{"name":"development","route":"/zh/development","children":[{"data":{"architecture":{"title":"架构"},"npm":{"title":"NPM"},"deployment":{"title":"部署"},"telemetry":{"title":"遥测"},"integration-tests":{"title":"集成测试"},"issue-and-pr-automation":{"title":"Issue 和 PR 自动化"}}},{"name":"architecture","route":"/zh/development/architecture","frontMatter":{"title":"Qwen Code 架构概览","filePath":"content/zh/development/architecture.md","timestamp":1761189884000},"title":"架构"},{"name":"npm","route":"/zh/development/npm","frontMatter":{"title":"Package 概览","filePath":"content/zh/development/npm.md","timestamp":1761189884000},"title":"NPM"},{"name":"deployment","route":"/zh/development/deployment","frontMatter":{"title":"Qwen Code 执行与部署","filePath":"content/zh/development/deployment.md","timestamp":1761189884000},"title":"部署"},{"name":"telemetry","route":"/zh/development/telemetry","frontMatter":{"title":"使用 OpenTelemetry 实现可观察性","filePath":"content/zh/development/telemetry.md","timestamp":1761189884000},"title":"遥测"},{"name":"integration-tests","route":"/zh/development/integration-tests","frontMatter":{"title":"集成测试","filePath":"content/zh/development/integration-tests.md","timestamp":1761189884000},"title":"集成测试"},{"name":"issue-and-pr-automation","route":"/zh/development/issue-and-pr-automation","frontMatter":{"title":"自动化与问题分诊流程","filePath":"content/zh/development/issue-and-pr-automation.md","timestamp":1761189884000},"title":"Issue 和 PR 自动化"}],"title":"开发指南"},{"name":"support","route":"/zh/support","children":[{"data":{"troubleshooting":{"title":"故障排除"},"tos-privacy":{"title":"服务条款"}}},{"name":"troubleshooting","route":"/zh/support/troubleshooting","frontMatter":{"title":"故障排除指南","filePath":"content/zh/support/troubleshooting.md","timestamp":1761189884000},"title":"故障排除"},{"name":"tos-privacy","route":"/zh/support/tos-privacy","frontMatter":{"title":"Qwen Code：服务条款与隐私声明","filePath":"content/zh/support/tos-privacy.md","timestamp":1761189884000},"title":"服务条款"}],"title":"支持"},{"name":"examples","route":"/zh/examples","children":[{"name":"proxy-script","route":"/zh/examples/proxy-script","frontMatter":{"title":"示例代理脚本","filePath":"content/zh/examples/proxy-script.md","timestamp":1761189884000},"title":"示例代理脚本"}],"title":"Examples"},{"name":"extensions","route":"/zh/extensions","children":[{"name":"extension","route":"/zh/extensions/extension","frontMatter":{"title":"Qwen Code Extensions","filePath":"content/zh/extensions/extension.md","timestamp":1761189884000},"title":"Qwen Code Extensions"},{"name":"extension-releasing","route":"/zh/extensions/extension-releasing","frontMatter":{"title":"Extension 发布","filePath":"content/zh/extensions/extension-releasing.md","timestamp":1761189884000},"title":"Extension 发布"},{"name":"getting-started-extensions","route":"/zh/extensions/getting-started-extensions","frontMatter":{"title":"Qwen Code Extensions 入门指南","filePath":"content/zh/extensions/getting-started-extensions.md","timestamp":1761189884000},"title":"Qwen Code Extensions 入门指南"}],"title":"Extensions"}],"navbar":["$","header",null,{"className":"nextra-navbar x:sticky x:top-0 x:z-30 x:w-full x:bg-transparent x:print:hidden x:max-md:[.nextra-banner:not([class$=hidden])~&]:top-(--nextra-banner-height)","children":[["$","div",null,{"className":"nextra-navbar-blur x:absolute x:-z-1 x:size-full nextra-border x:border-b x:backdrop-blur-md x:bg-nextra-bg/70"}],["$","nav",null,{"style":{"height":"var(--nextra-navbar-height)"},"className":"x:mx-auto x:flex x:max-w-(--nextra-content-width) x:items-center x:gap-4 x:pl-[max(env(safe-area-inset-left),1.5rem)] x:pr-[max(env(safe-area-inset-right),1.5rem)] x:justify-end","children":[["$","$L10",null,{"href":"/","className":"x:flex x:items-center x:me-auto x:transition-opacity x:focus-visible:nextra-focus x:hover:opacity-75","aria-label":"Home page","children":["$","span",null,{"className":"ms-2 select-none font-extrabold flex items-center","title":"Qwen Code: AI Coding Agent","children":[["$","img",null,{"src":"https://assets.alicdn.com/g/qwenweb/qwen-webui-fe/0.0.191/static/favicon.png","alt":"Qwen Code","width":32,"height":32,"className":"inline-block align-middle mr-2 ","style":{"verticalAlign":"middle"}}],["$","span",null,{"className":"text-[1.3rem]  font-normal align-middle mr-1 max-md:hidden","children":"Qwen"}],["$","span",null,{"className":"text-[1.3rem] font-normal align-middle max-md:hidden","children":"Code"}]]}]}],["$","$L11",null,{"className":"","children":[["$","a",null,{"href":"https://github.com/QwenLM/qwen-code","target":"_blank","rel":"noreferrer","children":[["$","svg",null,{"fill":"currentColor","viewBox":"3 3 18 18","height":"24","aria-label":"Project repository","children":["$","path",null,{"d":"$12"}]}],false],"className":"x:focus-visible:nextra-focus"}],"$undefined",["$","$L13",null,{"currentLang":"zh"}]]}]]}]]}],"footer":null,"children":[["$","$L14",null,{}],["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]]}]]}]}]
2:["$","div",null,{"className":"x:mx-auto x:flex x:max-w-(--nextra-content-width)","sourceCode":"$undefined","children":["$","$L15",null,{"value":[{"value":[["$","$16",".0",{"children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"@qwen-code/qwen-code"}]]}]],"id":"qwen-codeqwen-code","depth":2},{"value":[["$","$16",".0",{"children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"@qwen-code/qwen-code-core"}]]}]],"id":"qwen-codeqwen-code-core","depth":2},{"value":"如何发布版本","id":"如何发布版本","depth":2},{"value":"每日构建版本（Nightly Releases）","id":"每日构建版本nightly-releases","depth":2},{"value":"流程","id":"流程","depth":3},{"value":"故障处理","id":"故障处理","depth":3},{"value":"如何使用 Nightly Build","id":"如何使用-nightly-build","depth":3},{"value":"发布之后的操作","id":"发布之后的操作","depth":3},{"value":"发布验证","id":"发布验证","depth":2},{"value":"何时合并版本变更，何时不合并？","id":"何时合并版本变更何时不合并","depth":2},{"value":"合并回 main 分支以更新稳定补丁和热修复","id":"合并回-main-分支以更新稳定补丁和热修复","depth":3},{"value":"预发布版本（RC、Beta、Dev）不要合并回主分支","id":"预发布版本rcbetadev不要合并回主分支","depth":3},{"value":"本地测试与验证：打包和发布流程的变更","id":"本地测试与验证打包和发布流程的变更","depth":2},{"value":"Release Deep Dive","id":"release-deep-dive","depth":2},{"value":"阶段 1：发布前检查与版本更新","id":"阶段-1发布前检查与版本更新","depth":3},{"value":"阶段 2：构建源代码","id":"阶段-2构建源代码","depth":3},{"value":"阶段 3：组装最终可发布的包","id":"阶段-3组装最终可发布的包","depth":3},{"value":[["$","$16",".0",{"children":["1. 转换 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"package.json"}]]}]],"id":"1-转换-packagejson","depth":4},{"value":"2. 创建 JavaScript Bundle","id":"2-创建-javascript-bundle","depth":4},{"value":"3. 复制静态和支持文件","id":"3-复制静态和支持文件","depth":4},{"value":"阶段 4：发布到 NPM","id":"阶段-4发布到-npm","depth":3},{"value":"文件流转概览","id":"文件流转概览","depth":3},{"value":"NPM Workspaces","id":"npm-workspaces","depth":2},{"value":"工作原理","id":"工作原理","depth":3},{"value":"Workspaces 的优势","id":"workspaces-的优势","depth":3}],"children":[["$","$L17",null,{}],["$","$L18",null,{"metadata":{"title":"Package 概览","filePath":"content/zh/development/npm.md","timestamp":1761189884000},"bottomContent":"$undefined","children":[["$","div",null,{"id":"nextra-skip-nav"}],["$","main",null,{"data-pagefind-body":true,"children":[["$","h1",null,{"id":"$undefined","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-bold x:mt-2 x:text-4xl","children":["Package 概览","$undefined"]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["这个 monorepo 包含两个主要的包：",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"@qwen-code/qwen-code"}]," 和 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"@qwen-code/qwen-code-core"}],"。"]}],"\n",["$","h2",null,{"id":"qwen-codeqwen-code","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"@qwen-code/qwen-code"}],["$","$L19",null,{"id":"qwen-codeqwen-code"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"这是 Qwen Code 的主包。它负责用户界面、命令解析以及所有面向用户的其他功能。"}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["当这个包发布时，会被打包成一个单独的可执行文件。这个 bundle 包含了包的所有依赖，包括 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"@qwen-code/qwen-code-core"}],"。这意味着无论用户是通过 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npm install -g @qwen-code/qwen-code"}]," 安装包，还是直接使用 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npx @qwen-code/qwen-code"}]," 运行，他们使用的都是这个单一的、自包含的可执行文件。"]}],"\n",["$","h2",null,{"id":"qwen-codeqwen-code-core","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"@qwen-code/qwen-code-core"}],["$","$L19",null,{"id":"qwen-codeqwen-code-core"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"这个 package 包含了 CLI 的核心逻辑。它负责向已配置的 providers 发起 API 请求、处理认证以及管理本地缓存。"}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["这个 package 不会被打包（bundled）。发布时，它会作为一个标准的 Node.js package 进行发布，并带有其自身的依赖项。这使得它可以在其他项目中作为独立 package 使用（如果需要的话）。所有在 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"dist"}]," 文件夹中的转译后的 js 代码都会包含在这个 package 中。"]}],"\n",["$","h1",null,{"id":"$undefined","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-bold x:mt-2 x:text-4xl","children":["发布流程","$undefined"]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"本项目遵循结构化的发布流程，以确保所有 packages 都能被正确地版本化和发布。该流程的设计目标是尽可能实现自动化。"}],"\n",["$","h2",null,{"id":"如何发布版本","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":["如何发布版本",["$","$L19",null,{"id":"如何发布版本"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["版本发布通过 ",["$","a",null,{"href":"https://github.com/QwenLM/qwen-code/actions/workflows/release.yml","target":"_blank","rel":"noreferrer","className":"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]","children":["release.yml",[" ",["$","svg",null,{"fill":"none","stroke":"currentColor","strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":1.7,"viewBox":"0 0 24 24","height":"1em","className":"x:inline x:align-baseline x:shrink-0","children":[["$","path",null,{"d":"M7 17L17 7"}],["$","path",null,{"d":"M7 7h10v10"}]]}]]]}]," GitHub Actions 工作流进行管理。要手动发布一个补丁或热修复版本："]}],"\n",["$","ol",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-decimal x:ms-6","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":["进入仓库的 ",["$","strong",null,{"children":"Actions"}]," 标签页。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["在列表中选择 ",["$","strong",null,{"children":"Release"}]," 工作流。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["点击 ",["$","strong",null,{"children":"Run workflow"}]," 下拉按钮。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["填写所需的输入项：\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"Version"}],"：要发布的具体版本号（例如 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"v0.2.1"}],"）。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"Ref"}],"：要发布的目标分支或 commit SHA（默认为 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"main"}],"）。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"Dry Run"}],"：保留为 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"true"}]," 可在不实际发布的情况下测试工作流，设置为 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"false"}]," 则执行真实发布。"]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["点击 ",["$","strong",null,{"children":"Run workflow"}],"。"]}],"\n"]}],"\n",["$","h2",null,{"id":"每日构建版本nightly-releases","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":["每日构建版本（Nightly Releases）",["$","$L19",null,{"id":"每日构建版本nightly-releases"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"除了手动发布外，该项目还包含自动化的每日构建发布流程，用于提供最新的“前沿”版本，供测试和开发使用。"}],"\n",["$","h3",null,{"id":"流程","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["流程",["$","$L19",null,{"id":"流程"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["每天午夜 UTC 时间，",["$","a",null,{"href":"https://github.com/QwenLM/qwen-code/actions/workflows/release.yml","target":"_blank","rel":"noreferrer","className":"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]","children":["Release workflow",[" ",["$","svg",null,{"fill":"none","stroke":"currentColor","strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":1.7,"viewBox":"0 0 24 24","height":"1em","className":"x:inline x:align-baseline x:shrink-0","children":[["$","path",null,{"d":"M7 17L17 7"}],["$","path",null,{"d":"M7 7h10v10"}]]}]]]}]," 会按计划自动运行。它执行以下步骤："]}],"\n",["$","ol",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-decimal x:ms-6","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":["检出 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"main"}]," 分支的最新代码。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":"安装所有依赖项。"}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["运行完整的 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"preflight"}]," 检查和集成测试套件。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["如果所有测试都通过，它会计算下一个 nightly 版本号（例如，",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"v0.2.1-nightly.20230101"}],"）。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["然后构建并使用 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"nightly"}]," dist-tag 将包发布到 npm。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":"最后，为该 nightly 版本创建一个 GitHub Release。"}],"\n"]}],"\n",["$","h3",null,{"id":"故障处理","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["故障处理",["$","$L19",null,{"id":"故障处理"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["如果 nightly workflow 中的任何步骤失败，它将自动在仓库中创建一个新 issue，并打上 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bug"}]," 和 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"nightly-failure"}]," 标签。该 issue 将包含指向失败 workflow 运行的链接，方便调试。"]}],"\n",["$","h3",null,{"id":"如何使用-nightly-build","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["如何使用 Nightly Build",["$","$L19",null,{"id":"如何使用-nightly-build"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["要安装最新的 nightly build，可以使用 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"@nightly"}]," tag："]}],"\n",["$","div",null,{"data-pagefind-ignore":"all","className":"nextra-code x:relative x:not-first:mt-[1.25em]","children":["$undefined",["$","pre",null,{"className":"x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-md not-prose","tabIndex":"0","children":[["$","div",null,{"className":"x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-2","children":[["$","$L1a",null,{"children":["$","svg",null,{"viewBox":"0 0 24 24","fill":"currentColor","height":"1em","children":["$","path",null,{"d":"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"}]}]}],false]}],["$","code",null,{"className":"nextra-code","dir":"ltr","children":["$","span",null,{"children":[["$","span",null,{"style":{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},"children":"npm"}],["$","span",null,{"style":{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},"children":" install"}],["$","span",null,{"style":{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},"children":" -g"}],["$","span",null,{"style":{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},"children":" @qwen-code/qwen-code@nightly"}]]}]}]]}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["我们还运行了一个名为 ",["$","$L10",null,{"href":"../.gcp/release-docker.yml","prefetch":"$undefined","className":"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]","children":"release-docker.yml"}]," 的 Google Cloud Build，它会发布与你 release 版本对应的 sandbox Docker 镜像。一旦 service account 权限问题解决后，这部分也会迁移到 GitHub，并与主 release 文件合并。"]}],"\n",["$","h3",null,{"id":"发布之后的操作","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["发布之后的操作",["$","$L19",null,{"id":"发布之后的操作"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["当工作流成功完成后，你可以在 ",["$","a",null,{"href":"https://github.com/QwenLM/qwen-code/actions/workflows/release.yml","target":"_blank","rel":"noreferrer","className":"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]","children":["GitHub Actions tab",[" ",["$","svg",null,{"fill":"none","stroke":"currentColor","strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":1.7,"viewBox":"0 0 24 24","height":"1em","className":"x:inline x:align-baseline x:shrink-0","children":[["$","path",null,{"d":"M7 17L17 7"}],["$","path",null,{"d":"M7 7h10v10"}]]}]]]}]," 中监控进度。完成后，请执行以下操作："]}],"\n",["$","ol",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-decimal x:ms-6","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":["前往仓库的 ",["$","a",null,{"href":"https://github.com/QwenLM/qwen-code/pulls","target":"_blank","rel":"noreferrer","className":"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]","children":["pull requests 页面",[" ",["$","svg",null,{"fill":"none","stroke":"currentColor","strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":1.7,"viewBox":"0 0 24 24","height":"1em","className":"x:inline x:align-baseline x:shrink-0","children":[["$","path",null,{"d":"M7 17L17 7"}],["$","path",null,{"d":"M7 7h10v10"}]]}]]]}],"。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["从 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"release/vX.Y.Z"}]," 分支向 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"main"}]," 分支创建一个新的 pull request。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["审查该 pull request（应该只包含 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"package.json"}]," 文件中的版本更新），然后将其合并。这样可以保持 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"main"}]," 分支中的版本为最新。"]}],"\n"]}],"\n",["$","h2",null,{"id":"发布验证","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":["发布验证",["$","$L19",null,{"id":"发布验证"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"推送新版本后，应进行冒烟测试以确保包按预期工作。可以通过本地安装包并运行一组测试来验证其功能是否正常。"}],"\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npx -y @qwen-code/qwen-code@latest --version"}]," 用于验证推送是否成功（如果不使用 rc 或 dev 标签）"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npx -y @qwen-code/qwen-code@<release tag> --version"}]," 用于验证标签是否正确推送"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","em",null,{"children":"此操作会在本地产生破坏性影响"}],"：",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npm uninstall @qwen-code/qwen-code && npm uninstall -g @qwen-code/qwen-code && npm cache clean --force && npm install @qwen-code/qwen-code@<version>"}]]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":"建议对几个 LLM 命令和工具进行基本的运行流程测试，以确保包按预期工作。我们未来会进一步规范这一过程。"}],"\n"]}],"\n",["$","h2",null,{"id":"何时合并版本变更何时不合并","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":["何时合并版本变更，何时不合并？",["$","$L19",null,{"id":"何时合并版本变更何时不合并"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"从当前或较旧的 commit 创建 patch 或 hotfix 版本的上述模式会使 repository 处于以下状态："}],"\n",["$","ol",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-decimal x:ms-6","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":["Tag (",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"vX.Y.Z-patch.1"}],")：这个 tag 正确指向 main 分支上包含你打算发布的稳定代码的原始 commit。这一点至关重要。任何人检出这个 tag 都能得到确切的已发布代码。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["Branch (",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"release-vX.Y.Z-patch.1"}],")：这个分支在 tagged commit 的基础上包含一个新 commit。这个新 commit 只包含 package.json 中的版本号变更（以及其他相关文件如 package-lock.json）。"]}],"\n"]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"这种分离是很好的做法。它让你的 main 分支历史保持干净，不会包含发布特定的版本号提升，直到你决定合并它们。"}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"这是关键的决策点，完全取决于发布的性质。"}],"\n",["$","h3",null,{"id":"合并回-main-分支以更新稳定补丁和热修复","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["合并回 main 分支以更新稳定补丁和热修复",["$","$L19",null,{"id":"合并回-main-分支以更新稳定补丁和热修复"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["对于任何稳定补丁或热修复版本，你几乎总是需要将 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"release-<tag>"}]," 分支合并回 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"main"}]," 分支。"]}],"\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"为什么？"}]," 主要原因是为了更新 main 分支中 package.json 的版本号。如果你从一个较旧的 commit 发布了 v1.2.1 版本，但从未将版本号更新合并回主分支，那么 main 分支中的 package.json 仍然会显示 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"\"version\": \"1.2.0\""}],"。下一个为下一个功能版本（如 v1.3.0）开始工作的开发者将会基于一个版本号不正确、过时的代码库进行开发。这会导致混乱，并且后续还需要手动升级版本号。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"流程："}]," 在 release-v1.2.1 分支创建完成并且包发布成功后，你应该发起一个 pull request 将 release-v1.2.1 合并到 main 分支。这个 PR 只包含一个 commit：“chore: bump version to v1.2.1”。这是一种干净、简单的集成方式，可以让你的 main 分支与最新发布的版本保持同步。"]}],"\n"]}],"\n",["$","h3",null,{"id":"预发布版本rcbetadev不要合并回主分支","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["预发布版本（RC、Beta、Dev）不要合并回主分支",["$","$L19",null,{"id":"预发布版本rcbetadev不要合并回主分支"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["通常情况下，你不应该将预发布版本的 release branch 合并回 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"main"}]," 分支。"]}],"\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":"为什么？预发布版本（例如 v1.3.0-rc.1、v1.3.0-rc.2）本质上就是不稳定的临时版本。你不希望用一系列的 RC 版本号更新来污染 main 分支的历史记录。main 分支中的 package.json 应该反映最新的稳定版本，而不是 RC 版本。"}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["流程：创建 release-v1.3.0-rc.1 分支，执行 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npm publish --tag rc"}],"，然后…这个分支就完成了它的使命。你可以直接删除它。RC 版本的代码已经在 main 分支（或 feature branch）上了，所以不会丢失任何功能代码。release branch 只是版本号的一个临时载体。"]}],"\n"]}],"\n",["$","h2",null,{"id":"本地测试与验证打包和发布流程的变更","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":["本地测试与验证：打包和发布流程的变更",["$","$L19",null,{"id":"本地测试与验证打包和发布流程的变更"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"如果你需要在不实际发布到 NPM 或创建公开 GitHub release 的情况下测试发布流程，你可以通过 GitHub UI 手动触发 workflow。"}],"\n",["$","ol",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-decimal x:ms-6","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":["进入仓库的 ",["$","a",null,{"href":"https://github.com/QwenLM/qwen-code/actions/workflows/release.yml","target":"_blank","rel":"noreferrer","className":"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]","children":["Actions tab",[" ",["$","svg",null,{"fill":"none","stroke":"currentColor","strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":1.7,"viewBox":"0 0 24 24","height":"1em","className":"x:inline x:align-baseline x:shrink-0","children":[["$","path",null,{"d":"M7 17L17 7"}],["$","path",null,{"d":"M7 7h10v10"}]]}]]]}],"。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":"点击 “Run workflow” 下拉菜单。"}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["保持 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"dry_run"}]," 选项为勾选状态（即 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"true"}],"）。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":"点击 “Run workflow” 按钮。"}],"\n"]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["这将运行完整的发布流程，但会跳过 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npm publish"}]," 和 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"gh release create"}]," 步骤。你可以查看 workflow 日志以确保一切按预期工作。"]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"在提交任何对打包和发布流程的更改之前，在本地进行测试是至关重要的。这样可以确保包能被正确发布，并且用户安装后能够正常工作。"}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"要验证你的修改，可以执行一次发布流程的 dry run。这会模拟整个发布过程，而不会真正把包上传到 npm registry。"}],"\n",["$","div",null,{"data-pagefind-ignore":"all","className":"nextra-code x:relative x:not-first:mt-[1.25em]","children":["$undefined",["$","pre",null,{"className":"x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-md not-prose","tabIndex":"0","children":[["$","div",null,{"className":"x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-2","children":[["$","$L1a",null,{"children":["$","svg",null,{"viewBox":"0 0 24 24","fill":"currentColor","height":"1em","children":["$","path",null,{"d":"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"}]}]}],false]}],["$","code",null,{"className":"nextra-code","dir":"ltr","children":["$","span",null,{"children":[["$","span",null,{"style":{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},"children":"npm_package_version"}],["$","span",null,{"style":{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},"children":"="}],["$","span",null,{"style":{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},"children":"9.9.9"}],["$","span",null,{"style":{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},"children":" SANDBOX_IMAGE_REGISTRY"}],["$","span",null,{"style":{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},"children":"="}],["$","span",null,{"style":{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},"children":"\"registry\""}],["$","span",null,{"style":{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},"children":" SANDBOX_IMAGE_NAME"}],["$","span",null,{"style":{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},"children":"="}],["$","span",null,{"style":{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},"children":"\"thename\""}],["$","span",null,{"style":{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},"children":" npm"}],["$","span",null,{"style":{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},"children":" run"}],["$","span",null,{"style":{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},"children":" publish:npm"}],["$","span",null,{"style":{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},"children":" --dry-run"}]]}]}]]}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"该命令将会执行以下操作："}],"\n",["$","ol",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-decimal x:ms-6","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":"构建所有包。"}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":"运行所有的 prepublish 脚本。"}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":"创建将要发布到 npm 的 tarball 包。"}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":"输出即将发布的包的摘要信息。"}],"\n"]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["然后你可以检查生成的 tarball 文件，确认它们包含正确的文件，并且 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"package.json"}]," 已经被正确更新。这些 tarball 文件会被创建在每个 package 目录的根路径下（例如：",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/cli/qwen-code-0.1.6.tgz"}],"）。"]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"通过执行 dry run，你可以确信你对打包流程所做的修改是正确的，并且包可以成功发布。"}],"\n",["$","h2",null,{"id":"release-deep-dive","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":["Release Deep Dive",["$","$L19",null,{"id":"release-deep-dive"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["发布流程的主要目标是从 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/"}]," 目录中获取源代码，进行构建，并在项目根目录下的临时 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle"}]," 文件夹中组装一个干净、自包含的包。这个 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle"}]," 目录就是最终发布到 NPM 的内容。"]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"以下是关键阶段："}],"\n",["$","h3",null,{"id":"阶段-1发布前检查与版本更新","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["阶段 1：发布前检查与版本更新",["$","$L19",null,{"id":"阶段-1发布前检查与版本更新"}]]}],"\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"发生了什么"}],"：在移动任何文件之前，流程会确保项目处于良好状态。这包括运行测试、linting 和类型检查（",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npm run preflight"}],"）。同时，根目录下的 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"package.json"}]," 和 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/cli/package.json"}]," 中的版本号会被更新为新的发布版本。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"为什么这么做"}],"：这确保只有高质量、可运行的代码才会被发布。版本更新是新发布的第一个标志。"]}],"\n"]}],"\n",["$","h3",null,{"id":"阶段-2构建源代码","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["阶段 2：构建源代码",["$","$L19",null,{"id":"阶段-2构建源代码"}]]}],"\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"发生了什么"}],"：将 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/core/src"}]," 和 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/cli/src"}]," 中的 TypeScript 源代码编译为 JavaScript。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"文件移动"}],"：\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/core/src/**/*.ts"}]," -> 编译到 -> ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/core/dist/"}]]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/cli/src/**/*.ts"}]," -> 编译到 -> ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/cli/dist/"}]]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"为什么这么做"}],"：开发时编写的 TypeScript 需要转换为 Node.js 可执行的纯 JavaScript。core 包优先构建，因为 cli 包依赖它。"]}],"\n"]}],"\n",["$","h3",null,{"id":"阶段-3组装最终可发布的包","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["阶段 3：组装最终可发布的包",["$","$L19",null,{"id":"阶段-3组装最终可发布的包"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["这是最关键的一个阶段，文件在此阶段被移动并转换为最终用于发布的状态。项目根目录会创建一个临时的 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle"}]," 文件夹，用于存放最终的包内容。"]}],"\n",["$","h4",null,{"id":"1-转换-packagejson","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-xl","children":[["1. 转换 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"package.json"}]],["$","$L19",null,{"id":"1-转换-packagejson"}]]}],"\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"发生了什么"}],"：读取 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/cli/package.json"}],"，进行修改后写入项目根目录的 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle/"}]," 文件夹中。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"文件移动"}],"：",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/cli/package.json"}]," ->（内存中转换）-> ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle/package.json"}]]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"为什么这么做"}],"：最终的 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"package.json"}]," 必须与开发时使用的不同。关键变更包括：\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":["移除 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"devDependencies"}],"。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["移除 workspace 特定的依赖项：",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"{ \"@qwen-code/core\": \"workspace:*\" }"}],"，并确保 core 代码直接打包进最终的 JavaScript 文件中。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["确保 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bin"}],"、",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"main"}]," 和 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"files"}]," 字段指向最终包结构中的正确位置。"]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h4",null,{"id":"2-创建-javascript-bundle","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-xl","children":["2. 创建 JavaScript Bundle",["$","$L19",null,{"id":"2-创建-javascript-bundle"}]]}],"\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"发生了什么"}],"：将 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/core/dist"}]," 和 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/cli/dist"}]," 中构建好的 JavaScript 代码打包成一个可执行的 JavaScript 文件。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"文件移动"}],"：",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/cli/dist/index.js"}]," + ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/core/dist/index.js"}]," ->（通过 esbuild 打包）-> ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle/gemini.js"}],"（或类似名称）。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"为什么这么做"}],"：生成一个包含所有必要应用代码的单一优化文件。这简化了包结构，不再需要将 core 包作为单独依赖发布，因为其代码已直接包含在内。"]}],"\n"]}],"\n",["$","h4",null,{"id":"3-复制静态和支持文件","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-xl","children":["3. 复制静态和支持文件",["$","$L19",null,{"id":"3-复制静态和支持文件"}]]}],"\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"发生了什么"}],"：将不属于源代码但对包的正常运行或描述必要的文件复制到 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle"}]," 目录中。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"文件移动"}],"：\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"README.md"}]," -> ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle/README.md"}]]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"LICENSE"}]," -> ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle/LICENSE"}]]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages/cli/src/utils/*.sb"}],"（沙箱配置文件）-> ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle/"}]]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"为什么这么做"}],"：\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"README.md"}]," 和 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"LICENSE"}]," 是任何 NPM 包都应包含的标准文件。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":"沙箱配置文件（.sb 文件）是 CLI 沙箱功能运行所必需的关键运行时资源，必须与最终可执行文件位于同一目录。"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h3",null,{"id":"阶段-4发布到-npm","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["阶段 4：发布到 NPM",["$","$L19",null,{"id":"阶段-4发布到-npm"}]]}],"\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"发生了什么"}],"：在项目根目录的 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle"}]," 文件夹中执行 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npm publish"}]," 命令。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"为什么这么做"}],"：通过在 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"bundle"}]," 目录中执行 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npm publish"}],"，只有我们在阶段 3 中精心组装的文件会被上传到 NPM registry。这样可以避免意外发布源代码、测试文件或开发配置，确保用户获得的是一个干净、精简的包。"]}],"\n"]}],"\n",["$","h3",null,{"id":"文件流转概览","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["文件流转概览",["$","$L19",null,{"id":"文件流转概览"}]]}],"\n",["$","$L1b",null,{"chart":"graph TD\\n    subgraph \"Source Files\"\\n        A[\"packages/core/src/*.ts<br/>packages/cli/src/*.ts\"]\\n        B[\"packages/cli/package.json\"]\\n        C[\"README.md<br/>LICENSE<br/>packages/cli/src/utils/*.sb\"]\\n    end\\n\\n    subgraph \"Process\"\\n        D(Build)\\n        E(Transform)\\n        F(Assemble)\\n        G(Publish)\\n    end\\n\\n    subgraph \"Artifacts\"\\n        H[\"Bundled JS\"]\\n        I[\"Final package.json\"]\\n        J[\"bundle/\"]\\n    end\\n\\n    subgraph \"Destination\"\\n        K[\"NPM Registry\"]\\n    end\\n\\n    A --> D --> H\\n    B --> E --> I\\n    C --> F\\n    H --> F\\n    I --> F\\n    F --> J\\n    J --> G --> K"}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"这个流程确保最终发布的产物是一个专为发布而构建的、干净且高效的项目表示，而不是开发工作区的直接拷贝。"}],"\n",["$","h2",null,{"id":"npm-workspaces","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":["NPM Workspaces",["$","$L19",null,{"id":"npm-workspaces"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["本项目使用 ",["$","a",null,{"href":"https://docs.npmjs.com/cli/v10/using-npm/workspaces","target":"_blank","rel":"noreferrer","className":"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]","children":["NPM Workspaces",[" ",["$","svg",null,{"fill":"none","stroke":"currentColor","strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":1.7,"viewBox":"0 0 24 24","height":"1em","className":"x:inline x:align-baseline x:shrink-0","children":[["$","path",null,{"d":"M7 17L17 7"}],["$","path",null,{"d":"M7 7h10v10"}]]}]]]}]," 来管理 monorepo 中的各个 packages。这简化了开发流程，使我们能够从项目根目录统一管理依赖和运行多个 packages 的 scripts。"]}],"\n",["$","h3",null,{"id":"工作原理","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["工作原理",["$","$L19",null,{"id":"工作原理"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["根目录下的 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"package.json"}]," 文件定义了本项目的 workspaces："]}],"\n",["$","div",null,{"data-pagefind-ignore":"all","className":"nextra-code x:relative x:not-first:mt-[1.25em]","children":["$undefined",["$","pre",null,{"className":"x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-md not-prose","tabIndex":"0","children":[["$","div",null,{"className":"x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-2","children":[["$","$L1a",null,{"children":["$","svg",null,{"viewBox":"0 0 24 24","fill":"currentColor","height":"1em","children":["$","path",null,{"d":"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"}]}]}],false]}],["$","code",null,{"className":"nextra-code","dir":"ltr","children":[["$","span",null,{"children":["$","span",null,{"style":{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},"children":"{"}]}],"\n",["$","span",null,{"children":[["$","span",null,{"style":{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},"children":"  \"workspaces\""}],["$","span",null,{"style":{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},"children":": ["}],["$","span",null,{"style":{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},"children":"\"packages/*\""}],["$","span",null,{"style":{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},"children":"]"}]]}],"\n",["$","span",null,{"children":["$","span",null,{"style":{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},"children":"}"}]}]]}]]}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["这告诉 NPM，",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"packages"}]," 目录下的任何文件夹都是一个独立的 package，应该作为 workspace 的一部分进行管理。"]}],"\n",["$","h3",null,{"id":"workspaces-的优势","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-8 x:text-2xl","children":["Workspaces 的优势",["$","$L19",null,{"id":"workspaces-的优势"}]]}],"\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"简化的依赖管理"}],"：从项目根目录运行 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npm install"}]," 将会为 workspace 中的所有包安装依赖并相互链接。这意味着你不需要在每个包的目录中分别运行 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npm install"}],"。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"自动链接"}],"：workspace 内部的包可以互相依赖。当你运行 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npm install"}]," 时，NPM 会自动在这些包之间创建符号链接（symlinks）。也就是说，当你修改某个包时，依赖它的其他包会立即获取到最新的更改。"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"简化的脚本执行"}],"：你可以使用 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"--workspace"}]," 参数从项目根目录运行任意包中的脚本。例如，要运行 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"cli"}]," 包中的 ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"build"}]," 脚本，可以执行命令：",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"npm run build --workspace @qwen-code/qwen-code"}],"。"]}],"\n"]}]]}]]}]]}]}]
9:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Package 概览 | "}],["$","meta","3",{"name":"description","content":"x"}],["$","meta","4",{"name":"msapplication-TileColor","content":"#fff"}],["$","meta","5",{"name":"apple-mobile-web-app-capable","content":"yes"}],["$","meta","6",{"name":"apple-mobile-web-app-title","content":"Qwen Code"}],["$","meta","7",{"name":"apple-mobile-web-app-status-bar-style","content":"default"}],["$","meta","8",{"property":"og:title","content":"Package 概览 | "}],["$","meta","9",{"property":"og:description","content":"x"}],["$","meta","10",{"property":"og:image","content":"https://assets.vercel.com/image/upload/v1572282926/swr/twitter-card.jpg"}],["$","meta","11",{"name":"twitter:card","content":"summary"}],["$","meta","12",{"name":"twitter:site","content":"@qwenLLM"}],["$","meta","13",{"name":"twitter:title","content":"Package 概览 | "}],["$","meta","14",{"name":"twitter:description","content":"x"}],["$","meta","15",{"name":"twitter:image","content":"https://assets.vercel.com/image/upload/v1572282926/swr/twitter-card.jpg"}]]
1:null
